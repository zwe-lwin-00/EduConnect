<div class="teacher-students">
  <div class="page-header-compact">
    <div>
      <h1>Assigned Students</h1>
      <p class="page-desc-short">Student, grade, One-To-One status, subscription until.</p>
    </div>
  </div>

  <p-message *ngIf="error" severity="error" [text]="error" styleClass="w-full mb-3" />

  <div class="card table-card">
    <p-table
      [value]="students"
      [loading]="loading"
      [tableStyle]="{ 'min-width': '40rem' }"
      styleClass="p-datatable-gridlines p-datatable-striped"
      [paginator]="true"
      [rows]="10"
      [rowsPerPageOptions]="[10, 25]"
      [showCurrentPageReport]="true">
      <ng-template pTemplate="header">
        <tr>
          <th style="width:3rem">#</th>
          <th>Student</th>
          <th>Grade</th>
          <th>Subjects</th>
          <th>One-To-One status</th>
          <th>Class ID</th>
          <th>Subscription until</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-s let-rowIndex="rowIndex">
        <tr>
          <td>{{ rowIndex + 1 }}</td>
          <td>{{ s.studentName }}</td>
          <td>{{ s.gradeLevel }}</td>
          <td>{{ s.subjects }}</td>
          <td>{{ s.contractStatus }}</td>
          <td>{{ s.contractIdDisplay }}</td>
          <td>{{ s.subscriptionPeriodEnd ? (s.subscriptionPeriodEnd | date:'shortDate') : 'â€”' }}</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="7">
            <div class="empty-table-message">
              <i class="pi pi-users empty-icon"></i>
              <p>No assigned students.</p>
              <p class="empty-hint">Students are assigned via One-To-One contracts by Admin.</p>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
