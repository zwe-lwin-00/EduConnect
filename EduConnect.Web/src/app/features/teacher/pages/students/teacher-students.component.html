<div class="teacher-students">
  <div class="page-header-compact">
    <div>
      <h1>Assigned Students</h1>
      <p class="page-desc-short">Student, grade, contract status, subscription until.</p>
    </div>
  </div>

  <div *ngIf="loading" class="loading">Loading...</div>
  <div *ngIf="error" class="error">{{ error }}</div>

  <div class="card table-card" *ngIf="!loading && !error">
    <p-table
      [value]="students"
      [tableStyle]="{ 'min-width': '40rem' }"
      styleClass="p-datatable-gridlines p-datatable-striped"
      [paginator]="true"
      [rows]="10"
      [rowsPerPageOptions]="[10, 25]"
      [showCurrentPageReport]="true">
      <ng-template pTemplate="header">
        <tr>
          <th style="width:3rem">#</th>
          <th>Student</th>
          <th>Grade</th>
          <th>Subjects</th>
          <th>Contract Status</th>
          <th>Contract ID</th>
          <th>Subscription until</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-s let-rowIndex="rowIndex">
        <tr>
          <td>{{ rowIndex + 1 }}</td>
          <td>{{ s.studentName }}</td>
          <td>{{ s.gradeLevel }}</td>
          <td>{{ s.subjects }}</td>
          <td>{{ s.contractStatus }}</td>
          <td>{{ s.contractIdDisplay }}</td>
          <td>{{ s.subscriptionPeriodEnd ? (s.subscriptionPeriodEnd | date:'shortDate') : 'â€”' }}</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="7">No assigned students.</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
