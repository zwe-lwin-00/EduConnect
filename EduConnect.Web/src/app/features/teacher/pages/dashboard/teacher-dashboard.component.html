<div class="teacher-dashboard">
  <div class="page-header-compact">
    <div>
      <h1>Dashboard</h1>
      <p class="page-desc-short">Today’s sessions and quick actions</p>
    </div>
    <a routerLink="/teacher/sessions" class="btn btn-primary">Sessions</a>
  </div>

  <div *ngIf="loading" class="loading">Loading...</div>
  <div *ngIf="error" class="error">{{ error }}</div>

  <ng-container *ngIf="dashboard && !loading">
    <div class="widgets">
      <section class="widget widget-alerts">
        <h2 class="section-title">Alerts</h2>
        <div *ngIf="dashboard.alerts.length === 0" class="empty">No alerts</div>
        <ul class="alert-list">
          <li *ngFor="let a of dashboard.alerts" [class]="'alert-item ' + alertClass(a.type)">
            <span class="alert-type">{{ a.type }}</span>
            <span class="alert-message">{{ a.message }}</span>
          </li>
        </ul>
      </section>

      <section class="widget widget-sessions">
        <h2 class="section-title">Today</h2>
        <div *ngIf="dashboard.todaySessions.length === 0" class="empty">No sessions today</div>
        <div class="session-list">
          <div *ngFor="let s of dashboard.todaySessions" class="session-item">
            <div class="session-row"><strong>{{ s.studentName }}</strong> – {{ s.contractIdDisplay }}</div>
            <div class="session-meta">{{ s.status }}<span *ngIf="s.checkInTime"> · {{ s.checkInTime | date:'short':'+0630' }}</span></div>
          </div>
        </div>
        <a routerLink="/teacher/sessions" class="link-more">Sessions →</a>
      </section>

      <section class="widget widget-upcoming">
        <h2 class="section-title">Can start</h2>
        <div *ngIf="dashboard.upcomingSessions.length === 0" class="empty">None</div>
        <div class="session-list">
          <div *ngFor="let s of dashboard.upcomingSessions" class="session-item">
            <div class="session-row">{{ s.studentName }} – {{ s.contractIdDisplay }}</div>
          </div>
        </div>
        <a routerLink="/teacher/sessions" class="link-more">Sessions →</a>
      </section>

      <section class="widget widget-hours">
        <h2 class="section-title">Your hours</h2>
        <div class="hours-count">{{ dashboard.totalRemainingHours }}</div>
        <p class="hours-desc">Remaining across contracts</p>
      </section>
    </div>
  </ng-container>
</div>
