<div class="admin-attendance page-container">
  <div class="page-header-compact">
    <div>
      <h1>Attendance</h1>
      <p class="page-desc-short">Today’s sessions. Override check-in/out or adjust hours.</p>
    </div>
  </div>

  <p-card>
    <div *ngIf="loading" class="empty-table-message">
      <p-progressSpinner strokeWidth="4" styleClass="mb-2" [style]="{ width: '40px', height: '40px' }" />
      <p>Loading sessions...</p>
    </div>
    <div *ngIf="!loading && sessions.length === 0" class="empty-table-message">
      <i class="pi pi-calendar empty-icon"></i>
      <p>No sessions today.</p>
      <p class="empty-hint">Sessions for today will appear here.</p>
    </div>
    <div *ngIf="!loading && sessions.length > 0" class="session-list">
      <div *ngFor="let s of sessions" class="session-card">
        <div class="session-info">
          <strong>{{ s.teacherName }}</strong> – {{ s.studentName }}
          <span class="status">Status: {{ s.status }}</span>
        </div>
        <div class="session-meta" *ngIf="s.checkInTime">Check-in: {{ s.checkInTime | displayDate:'short' }}</div>
        <div class="session-meta" *ngIf="s.checkOutTime">Check-out: {{ s.checkOutTime | displayDate:'short' }}</div>
        <div class="session-actions">
          <p-button label="Override Check-In" [outlined]="true" size="small" (onClick)="overrideCheckIn(s)" />
          <p-button label="Override Check-Out" [outlined]="true" size="small" (onClick)="overrideCheckOut(s)" />
          <p-button label="Adjust Hours" [outlined]="true" size="small" (onClick)="openAdjust(s)" />
        </div>
      </div>
    </div>
  </p-card>

  <p-card *ngIf="adjustingId !== null" header="Adjust Hours" styleClass="adjust-card">
    <div class="dialog-form">
      <div class="field">
        <label>Hours</label>
        <p-inputNumber [(ngModel)]="adjustHours" [min]="0" [minFractionDigits]="0" [maxFractionDigits]="1" [step]="0.5" inputStyleClass="w-full" styleClass="w-full" />
      </div>
      <div class="field">
        <label>Reason *</label>
        <input pInputText type="text" [(ngModel)]="adjustReason" class="w-full" placeholder="Reason for override" />
      </div>
    </div>
    <div class="form-actions">
      <p-button label="Cancel" severity="secondary" (onClick)="closeAdjust()" />
      <p-button label="Submit" icon="pi pi-check" (onClick)="submitAdjust()" />
    </div>
  </p-card>
</div>
