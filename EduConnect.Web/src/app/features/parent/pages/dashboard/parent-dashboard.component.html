<div class="parent-dashboard page-container">
  <div class="page-header-compact">
    <div>
      <h1>My Students</h1>
      <p class="page-desc-short">View each child's learning overview: teacher, sessions, homework, grades.</p>
    </div>
  </div>

  <p-message *ngIf="error" severity="error" [text]="error" styleClass="w-full mb-3" />

  <div *ngIf="loading" class="empty-table-message">
    <p-progressSpinner strokeWidth="4" styleClass="mb-2" [style]="{ width: '40px', height: '40px' }" />
    <p>Loading...</p>
  </div>

  <ng-container *ngIf="!loading && !error">
    <div *ngIf="students.length === 0" class="empty-state-card">
      <p-card>
        <div class="empty-state">
          <i class="pi pi-users empty-icon"></i>
          <p>No students linked.</p>
          <p class="empty-hint">Contact admin to add your children to your account.</p>
        </div>
      </p-card>
    </div>
    <div class="student-cards" *ngIf="students.length > 0">
      <p-card *ngFor="let s of students" [header]="s.fullName" styleClass="student-card-block">
        <div class="student-meta" *ngIf="s.subscriptionValidUntil">Subscription until {{ s.subscriptionValidUntil | date:'shortDate' }}</div>
        <div class="student-meta">Grade {{ s.gradeLevel }}</div>
        <div class="student-meta" *ngIf="s.assignedTeacherName">Teacher: {{ s.assignedTeacherName }}</div>
        <p-button label="View learning overview" icon="pi pi-arrow-right" iconPos="right" [outlined]="true" [routerLink]="['/parent/student', s.id]" styleClass="mt-3" />
      </p-card>
    </div>
  </ng-container>
</div>
