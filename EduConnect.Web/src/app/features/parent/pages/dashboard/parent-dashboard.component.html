<div class="parent-dashboard">
  <div class="page-header-compact">
    <div>
      <h1>My Students</h1>
      <p class="page-desc-short">View each child’s learning overview: teacher, sessions, homework, grades.</p>
    </div>
  </div>

  <div *ngIf="loading" class="loading">Loading...</div>
  <div *ngIf="error" class="error">{{ error }}</div>

  <ng-container *ngIf="!loading && !error">
    <div *ngIf="students.length === 0" class="empty">
      No students linked. Contact admin to add your children.
    </div>
    <div class="student-cards" *ngIf="students.length > 0">
      <div *ngFor="let s of students" class="student-card" [class.low-hours]="s.totalRemainingHours < 5 && s.totalRemainingHours >= 0">
        <div class="student-name">{{ s.firstName }} {{ s.lastName }}</div>
        <div class="hours-left">{{ s.totalRemainingHours }} hours left for {{ s.firstName }} {{ s.lastName }}</div>
        <p class="top-up-hint" *ngIf="s.totalRemainingHours < 5 && s.totalRemainingHours >= 0">Consider topping up with Admin to avoid interruption.</p>
        <div class="student-meta">Grade {{ s.gradeLevel }}</div>
        <div class="student-meta" *ngIf="s.assignedTeacherName">Teacher: {{ s.assignedTeacherName }}</div>
        <a [routerLink]="['/parent/student', s.id]" class="link-overview">View learning overview →</a>
      </div>
    </div>
  </ng-container>
</div>
